To do:
*********************************
** Curent Functions small updates 
In generateEggChamberSummaryTable
 -Generate summary statistics per condition, and save as text file.
 -Include table and summary stats for egg chambers of desired stages. Also include clusters if the Data is there.

- in scatterPlotMetricBySample: Exclude egg chamber stages but plot by sample?

- in scatterPlotMetricBySample and scatterPlotMetricByEggChamber
  -overlay egg chamber mean over scatter plot.
  -Color code egg chamber by stage? By condition? color symbols, add alpha

- add function to save plot, maybe along w some metadata.

- Fiji: add log file with time stamps and list of parameters used for each of the macros. 

*********************************
** Architecture questions

x nucleolus segmentation and background. What is the current status? Check how to integrate that with the nuclei table.

- how to save analyses w different parameters w/o overwriting?

- general thought on plotting functions: we will likely need to easily exclude samples/egg chambers if wonky, egg chamber stages etc; options what feature to color code, what colors to use. Probably best to have name pair arguments structure of optional things in order to use the existing Matlab structure.

x Cluster metrics: Figure out when adding clusters whether we want a second table for the cluster stats and then integrate mean cluster stats to the nuclei table.
This will be needed if we want background correction for the clusters.

x Same for plotting - should we make function by nucleus or by cluster. 

*********************************
** robustness
X rename existing methods so it's unambiguous they apply to nuclei metrics.
X Make sure all operations are performed on both t and fullT to maintain consistency.
X Make sure that methods to subtract background etc check for pre-exisitng runs (do not subtract twice). Also that they can be run at any point, e.g. before or after the plasmInt and the nucleoliInt have been added.
- make table construction and methods modular whether or not one wants to quantify clusters.
- what if nuclei #s don't match between nucleus analysis and cluster analysis?

*********************************
** Documentation:
- data org: add screen cap.
- nuclei segmentation walk through.
- cluster detection walk through.

*********************************
** New functions:
- Histogram plot for nuclei metrics by egg chamber, by sample.
- plot metric a vs metric b. Use for z, egg chamber stage, sample.
- normalize metrics by z? By DAPI signal?
- add a checksum kind of function? E.g. plasmCorr vs subtraction of the plasm Int. (Are they supposed to be equal? Or is plasmCorr computed plane by plane?)
- loadNucleoliInt. Collect data from all files and append columns to t and fullT. Ignore neighbors, NumberOfVoxels, maybe Volume as well, load from the geometry file instead.
- LoadPlasmInt. Collect all files and move to t and fullT. Ignore neighbors, NumberOfVoxels, maybe Volume as well, load from the geometry file instead. 
- Method to correct nucleoli and plasmInt for wholeImgInt? Maybe include that in existing function.
- loadCluster. Generate new table. Generate a method to easily replicate nucleus metric to the format of the cluster table (i.e. replicate each nucleus metric as many times as there are clusters in the nucleus, for dimensions to match).

*********************************
** notes on analysis
- Judging by DAPI, median/wholeImgCorr seems the metric that gives the least CV. Not by a ton vs mean. The omg correction definitely helps though.
- unclear how EC stage, z impact metrics, need function to plot a vs b to figure that out.
- also maybe have a volume cutoff and/or DAPI std to be able to exclude poorly segmented nuclei if we think they will be an issue.
- prepare simple scripts for nucleus only analysis, cluster analysis, +/- egg chamber staging.

*********************************
** Fiji bugs
x nucleoliInt seems empty
- clusters quant only saved for nuc1???

*********************************
For the scatter by eggChamber function:
- use https://www.mathworks.com/help/matlab/ref/inputparser.html to parse input.
Parameters: 
eggChamberStagesToInclude, 
samplesToInclude, 
colorCode (sample; eggChamber; condition; eggChamberStage; any variable really - check how to build the name intuitively. Maybe some keywords or full variable name), 
colorMap (include cBrewer options), 
alpha, 
addMeanAndErrorBar
Different grouping spacing modes?
Should I trim the data table as an easier way to process the data plotting?

For the loadClusterData
Flag to ignore nucIDs that aren't part of the current table.
Build list of nucIDs for current sample.
All in nucCSV subfolder (part of the private properties?)

Three subunits
loadNucleoli
loadPlasm
loadClusters

In each: 

collect nucIDs from the folder list based on name + corresponding file names
Loop through nucIDs, load one that are contained in the list.
Nucleoli/plasm. Add all columns from geom (nuc37_nucleoliGeom) and channels data to fullT and t. Add prefix nucleoli or plasm
Add all columns to t. 
Streamline table t.

Load clusters


Nucleoli

C7_nuc11_nucleoliInt.csv 
nuc15_nucleoliGeom.csv

Geom values

No files found -> varsFound = 0, move on
All files found -> varsFound = 1, move on
Partial files found -> varsFound = ?
If missing all color channels
If missing a color channel, use other channels as indicators of the data variables.
If missing the geometry file

List of vars loaded. 
If new vars, append vars to the list. Join tables with function.
If missing vars, Join table w function. 

Loop through expected files for each metric
If present, load, update variable names, concatenate horizontally into table.
If absent, skip.












